Version 4
SHEET 1 1532 680
WIRE 704 -160 688 -160
WIRE 832 -160 784 -160
WIRE 416 -96 416 -128
WIRE 560 -32 560 -128
WIRE 592 -32 560 -32
WIRE 688 -32 688 -160
WIRE 688 -32 672 -32
WIRE 704 -32 688 -32
WIRE 832 -16 832 -160
WIRE 832 -16 768 -16
WIRE 928 -16 832 -16
WIRE 416 0 416 -16
WIRE 704 0 416 0
WIRE 416 32 416 0
WIRE -336 80 -336 48
WIRE -336 80 -416 80
WIRE -416 112 -416 80
WIRE -336 112 -336 80
WIRE -208 128 -208 96
WIRE -64 128 -64 96
WIRE 176 128 176 96
WIRE 416 144 416 112
WIRE -336 224 -336 192
WIRE -208 240 -208 208
WIRE -64 240 -64 208
WIRE 176 240 176 208
FLAG 176 240 0
FLAG 176 96 Vdac
FLAG 416 144 0
FLAG 416 -128 Vref
FLAG 560 -128 Vdac
FLAG 928 -16 out
FLAG -64 240 0
FLAG -64 96 Voffset
FLAG -416 112 0
FLAG -336 224 Vb-
FLAG -336 -32 Vb+
FLAG -208 240 0
FLAG -208 96 Vref
FLAG 736 -48 Vb+
FLAG 736 16 Vb-
SYMBOL voltage 176 112 R0
WINDOW 3 24 44 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value {Vdac}
SYMATTR InstName V1
SYMBOL res 576 -16 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value 12k
SYMBOL res 688 -144 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R4
SYMATTR Value 30k
SYMBOL voltage -64 112 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value {0.064 * 2.5 / 3.5}
SYMBOL voltage -336 -48 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value 15
SYMBOL voltage -336 96 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value 15
SYMBOL voltage -208 112 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value 4.096
SYMBOL res 400 -112 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 400 16 R0
SYMATTR InstName R2
SYMATTR Value 113
SYMBOL Opamps\\LM358 736 -80 R0
SYMATTR InstName U1
TEXT 80 304 Left 2 !.lib opamp.sub
TEXT 520 216 Left 2 !.op
TEXT 520 72 Left 2 !;.step dec param R 1 10Meg 1
TEXT 520 112 Left 2 !.step param Vdac 0 4.096 4.096
TEXT 520 144 Left 2 !;.param Vdac 0
TEXT 520 176 Left 2 ;Voffset: desired_Vdac_offset * gain / (gain + 1)
